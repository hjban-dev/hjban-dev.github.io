{"componentChunkName":"component---src-templates-blog-template-js","path":"/post/2019-08-07-nodejs-08-cookie","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Nodejs Cookie 생성 및 사용","tags":["Nodejs"]},"fields":{"slug":"2019-08-07-nodejs-08-cookie"},"html":"<blockquote>\n<p><a href=\"https://www.inflearn.com/course/nodejs-%EA%B0%95%EC%A2%8C-%EC%83%9D%ED%99%9C%EC%BD%94%EB%94%A9#\">생활코딩 Node.js 강의</a> 와 KOSMO 노드JS 프로그래밍 수업을 듣고 정리합니다.<br>\nCookie 개념을 세우고 사용하는 법을 알아본다  </p>\n</blockquote>\n<h1>Nodejs Cookie 생성 및 사용</h1>\n<h2>Cookie 배경</h2>\n<ul>\n<li>http 라는 통신 방식은 요청과 응답이 이루어지고 나면 연결이 끊김.</li>\n<li>\n<p>이전에 사용했던 <u>사용자, 브라우저 등의 정보를 지속적으로 유지하기 위해 개발</u></p>\n<ul>\n<li>ex) 사용자가 웹 페이지를 방문하면 방문자의 이름을 쿠키에 저장할 수 있습니다.</li>\n<li>다음에 사용자가 페이지를 방문하면 쿠키는 방문자의 이름을 \"기억\"합니다.</li>\n</ul>\n</li>\n<li>클라이언트 <code>웹브라우저</code>에 저장하고 같은 주소의 사이트에서만 유효  </li>\n</ul>\n<h2>Cookie <a href=\"https://www.npmjs.com/package/cookie-parser\">적용방법</a></h2>\n<ul>\n<li>\n<p>설치 <code>npm install cookie-parser --save</code></p>\n<ul>\n<li>package.json 에서 설치 확인</li>\n</ul>\n</li>\n<li>app.js에 해당 모듈 추가 <code>var cookieParser = require('cookie-parser')</code></li>\n<li>express 프로세스 app에 cookie-parse 미들웨어 연결<br>\n<code>app.use(cookieParser())</code>  </li>\n</ul>\n<h3>cookie 저장하는 방법</h3>\n<pre><code class=\"language-javascript\">res.cookie('cookie name', 'cookie value', option)\n</code></pre>\n<h3>컴퓨터가 가지고 있는 cookie 확인 하는 방법</h3>\n<pre><code class=\"language-javascript\">req.cookies.[cookie name]\n</code></pre>\n<h4>cookie로 방문 횟수 추적 예제</h4>\n<pre><code class=\"language-javascript\">var express = require('express');\nvar cookieParser = require('cookie-parser');\n\nvar app = express();\n\n// cookieParser 미들웨어 연결\napp.use(cookieParser());\n\napp.get('/', (req, res) => {\n  // 쿠키가 없다면 초기화 있다면 쿠키값을 받아옴\n    if(req.cookies.count == undefined){\n        var count = 0;\n    }else{\n        var count = parseInt(req.cookies.count);\n        res.cookie('count',count+1);\n    }\n    res.send('count: ' + req.cookies.count);\n  }\n);\n\napp.listen(3000, () => {\n  console.log('server start on port 3000');\n});\n</code></pre>\n<center>\n<figure>\n<img src=\"/assets/post-img/nodejs/cookie-count.jpg\" alt=\"\" width=\"397\">\n<figcaption>cookie로 방문 횟수 추적 예제</figcaption>\n</figure>\n</center>\n<h4>cookie 세팅 후 정보 활용</h4>\n<pre><code class=\"language-javascript\">router.route('/process/showCookie').get(function(req, res) {\n  console.log('/process/showCookie 요청 들어옴 ...');\n  // end() 문자열을 인자로 사용, send() 객체나 수식을 인자로 사용.\n  res.send(req.cookies);\n});\n\nrouter.route('/process/setCookie').get(function(req, res) {\n  // 쿠키는 사용자측 PC에 생성 된다.\n  res.cookie('user', {\n    id: 'KIM',\n    name: '방탄소년단',\n    authorized: true\n  });\n  \n  // showCookie로 redirect\n  res.redirect('/process/showCookie');\n}); \n</code></pre>\n<p>setCookie에서 쿠키를 웹 브라우저에 설정<br>\n/process/showCookie로 redirect<br>\n설정된 cookie 정보로 응답<br>\n개발자 도구의 Network 탭에서 새로 고침후 showCookie에서 cookie 정보 확인  </p>\n<center>\n<figure>\n<img src=\"/assets/post-img/nodejs/cookie.jpg\" alt=\"\" width=\"600\">\n<figcaption>개발자 도구에서 웹 브라우저에 저장된 cookie 확인</figcaption>\n</figure>\n</center>","id":"3ea7c70e-f436-546d-8c03-07f244042088"}},"pageContext":{"slug":"2019-08-07-nodejs-08-cookie"}}}