{"componentChunkName":"component---src-blog-template-js","path":"/post/2020-04-02-react-hooks9","result":{"data":{"markdownRemark":{"frontmatter":{"title":"실전형 리액트 Hooks 10가지 - useBeforeLeave(useEffect)","tags":["React"]},"fields":{"slug":"2020-04-02-react-hooks9"},"html":"<blockquote>\n<p>노마드코더의 실전형 리액트 Hooks 10가지 수업을 듣고 정리합니다. <a href=\"https://academy.nomadcoders.co/\">https://academy.nomadcoders.co/</a></p>\n</blockquote>\n<h1>2 useEffect</h1>\n<h2>2.4 useBeforeLeave</h2>\n<p>useBeforeLeave는 tab을 닫으려 할 때 실행하는 함수입니다. 이전 장의 useConfirm는 창을 닫기 전에 confirm창을 띄웠습니다. useBeforeLeave는 사용자의 마우스가 브라우저를 벗어나 위쪽으로 가면 실행하는 함수입니다.  </p>\n<p>이번에는 useEffect를 사용하겠습니다.  </p>\n<pre><code class=\"language-javascript\">const useBeforeLeave = onBefore => {\n  if (typeof onBefore !== \"function\") {\n    return;\n  }\n  const handle = event => {\n    const { clientY } = event; // event : MouseEvent의 객체\n    if (clientY &#x3C;= 0) { // clientY(마우스의 좌표값)가 0 이하\n      onBefore();\n    }\n  };\n  useEffect(() => { \n    document.addEventListener(\"mouseleave\", handle); // 컴포넌트가 mount 되면, mouseleave 이벤트 생성\n    return () => document.removeEventListener(\"mouseleave\", handle); // 컴포넌트가 unmount 되면, mouseleave 이벤트 제거\n  }, []); // 이벤트가 document에 추가 되는 것을 막음(한번만 실행)\n};\n\nconst App = () => {\n  const dontLeave = () => console.log(\"Pls dont leave\");\n  useBeforeLeave(dontLeave);\n  return (\n    &#x3C;div className=\"App\">\n      &#x3C;h1>Hello&#x3C;/h1>\n    &#x3C;/div>\n  );\n};\n</code></pre>\n<center>\n<figure>\n<img src=\"/assets/post-img/react/hooks/nomad_react_hooks_9.gif\" alt=\"\">\n<figcaption>코드 실행 결과</figcaption>\n</figure>\n</center>","id":"0d473227-810e-5902-ae1a-00752c14d92e"}},"pageContext":{"slug":"2020-04-02-react-hooks9"}}}